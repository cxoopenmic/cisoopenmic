<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CISO Open Mic</title>
  <meta name="description" content="CISO Open Mic ‚Äî a forum for CISOs and security leaders to share, connect, and learn."/>
  <link rel="icon" href="assets/favicon.ico" type="image/x-icon"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #000100;
      --card: #717170;
      --text: #fdfdfd;       /* whiter text in dark mode */
      --muted: #e0e0e0;      /* neutral muted */
      --accent: #c12331;
      --accent-2: #ff8a00;
      --ring: rgba(255,255,255,0.08);
    }

    body { 
      margin: 0; 
      font-family: "Open Sans", Arial, sans-serif; 
      background: var(--bg); 
      color: var(--text); 
      border: 2px solid var(--accent-2);   /* thin orange border flush to edges */
    }

    header { padding: 64px 20px 32px; text-align: center; }

    .brand { display: inline-flex; align-items: center; gap: 14px; margin-bottom: 8px; }
    .brand img.logo {
      width: 112px; height: 112px; border-radius: 50%; object-fit: cover; border: none;
      box-shadow: 0 6px 18px rgba(0,0,0,0.35);
    }

    h1 {
      font-size: clamp(28px, 4vw, 42px); margin: 0; line-height: 1.15;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }

    .tagline { color: var(--muted); margin-top: 12px; font-size: 1.05rem; display: block; }

    .btn {
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #fff; padding: 12px 18px; border-radius: 8px; font-weight: 700;
      text-decoration: none; display: inline-flex; line-height: 1.2;
      box-shadow: 0 8px 18px rgba(0,0,0,0.25);
    }

    /* Make Lu.ma Register button match .btn */
    .luma-checkout--button {
      background: linear-gradient(135deg, var(--accent), var(--accent-2)) !important;
      color: #fff !important;
      font-weight: 700 !important;
      text-decoration: none !important;
      padding: 12px 18px !important;
      border-radius: 8px !important;
      display: inline-flex !important;
      align-items: center; justify-content: center;
      line-height: 1.2 !important;
      border: none !important;
      box-shadow: 0 8px 18px rgba(0,0,0,0.25) !important;
      cursor: pointer;
    }

    .cta-row { display: flex; justify-content: center; gap: 12px; flex-wrap: wrap; margin-top: 36px; }

    main { max-width: 1100px; margin: 0 auto; padding: 24px 32px 64px; }

    .grid { display: grid; grid-template-columns: 1fr; gap: 20px; margin-top: 24px; }
    @media (min-width: 980px){ .grid { grid-template-columns: 1.2fr 0.8fr; } }

    .card { background: var(--card); border-radius: 14px; padding: 18px; border: 1px solid var(--ring); }
    .card h2 { margin: 0 0 10px; font-size: 1.25rem; }

    /* Clean embed containers */
    .embed-wrap { background: transparent; border: none; padding: 0; min-height: auto; }
    .luma-calendar-embed { width: 100%; min-height: 420px; display: block; }

    /* Custom link style inside cards */
    .card a {
      color: var(--accent);
      font-weight: 600;
      text-decoration: none;
      border-bottom: 1px dashed var(--accent);
    }
    .card a:hover {
      color: var(--accent-2);
      border-bottom: 1px solid var(--accent-2);
    }

    /* Extra styling for "Next Up" content */
    .event-info {
      background: rgba(0,0,0,0.25);
      padding: 12px;
      border-radius: 8px;
      border: 1px solid var(--ring);
      margin-bottom: 16px;
    }
    .event-title { font-size: 1.05rem; font-weight: 700; margin: 0; }
    .event-meta { color: var(--muted); margin: 4px 0 0; }
    .divider { border: none; border-top: 1px solid var(--ring); margin: 16px 0; }
    .highlights { color: var(--muted); font-size: 0.95rem; padding-left: 18px; margin: 0 0 20px; }

    footer {
      text-align: center;
      color: var(--text);   /* dynamic: white in dark mode, black in light */
      font-size: .92rem;
      padding: 28px 16px;
    }

    /* Light mode overrides */
    body.light {
      --bg: #f8fafc;
      --card: #ffffff;
      --text: #000000;     /* black text in light mode */
      --muted: #475569;
      --ring: rgba(0,0,0,0.08);
    }

    /* Neutral theme toggle */
    .theme-toggle { 
      position: fixed; top: 16px; right: 16px; z-index: 1000;
      background: var(--muted);
      color: var(--bg);
      border: none;
      padding: 8px 14px;
      border-radius: 6px;
      font-weight: 800;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      transition: background 0.3s, color 0.3s;
    }
    .theme-toggle:hover {
      background: var(--text);
      color: var(--bg);
    }

    @media (max-width: 480px) {
      .cta-row { margin-top: 36px; }
      header { padding-bottom: 40px; }
    }
  </style>
</head>
<body>
  <!-- Contextual theme toggle -->
  <button id="theme-toggle" class="theme-toggle">Light</button>

  <header>
    <div class="brand">
      <img src="assets/logo.png" alt="CISO Open Mic logo" class="logo"/>
      <h1>CISO Open Mic</h1>
    </div>
    <div class="tagline">A forum for CISOs and security leaders to share, connect, and learn.</div>
    <div class="cta-row">
      <a class="btn" href="https://lu.ma/cal-hw6M9gTyUBMNupW" target="_blank" rel="noopener">View All Events</a>
    </div>
  </header>

  <main>
    <div class="grid">
      <!-- Upcoming Events with robust fallback -->
      <section class="card">
        <h2>Upcoming Events</h2>
        <div class="embed-wrap">
          <script src="https://embed.lu.ma/calendar.js"></script>
          <div id="luma-cal" class="luma-calendar-embed"
               data-calendar-id="cal-hw6M9gTyUBMNupW"
               data-default-view="list"
               data-show-search="false">
          </div>

          <div id="luma-cal-fallback" style="display:none;">
            <iframe
              src="https://lu.ma/embed/calendar/cal-hw6M9gTyUBMNupW/events"
              width="600" height="520" frameborder="0"
              style="border: 1px solid #bfcbda88; border-radius: 4px; width:100%;"
              loading="lazy" allowfullscreen
            ></iframe>
            <p class="tagline" style="margin-top:8px;">
              If the embed is blocked, you can also
              <a href="https://lu.ma/cal-hw6M9gTyUBMNupW" target="_blank" rel="noopener">
                open the calendar directly
              </a>.
            </p>
          </div>

          <noscript>
            <p style="color:#e0e0e0">
              JavaScript is required to load the Lu.ma calendar.
              <a href="https://lu.ma/cal-hw6M9gTyUBMNupW" target="_blank" rel="noopener">Open the calendar directly</a>.
            </p>
          </noscript>
        </div>

        <script>
          (function() {
            var checkMs = 2000;
            setTimeout(function() {
              var host = document.getElementById('luma-cal');
              var fallback = document.getElementById('luma-cal-fallback');
              var rendered = host && host.querySelector('iframe');
              if (!rendered && fallback) {
                fallback.style.display = 'block';
                if (host) host.style.display = 'none';
              }
            }, checkMs);
          })();
        </script>
      </section>

      <!-- Next Up -->
      <aside class="card">
        <h2>Next Up</h2>

        <!-- Mini-card with name, date/time, location -->
        <div class="event-info">
          <p class="event-title">Toronto CISO Open Mic</p>
          <p class="event-meta">September 24, 2025 ¬∑ 6:00‚Äì9:00 PM ET</p>
          <p class="event-meta">üìç The National Club ¬∑ Toronto</p>
        </div>

        <!-- Divider + highlights -->
        <hr class="divider">
        <ul class="highlights">
          <li>Networking with CISOs and security leaders</li>
          <li>Interactive Open Mic format</li>
          <li>Drinks & light dinner provided</li>
        </ul>

        <!-- Register button -->
        <div class="embed-wrap" style="text-align:center; padding:20px;">
          <a href="https://lu.ma/event/evt-tYYm8prjk6J5TjD"
             class="luma-checkout--button"
             data-luma-action="checkout"
             data-luma-event-id="evt-tYYm8prjk6J5TjD">
            Register for Event
          </a>
          <script id="luma-checkout" src="https://embed.lu.ma/checkout-button.js"></script>
        </div>
      </aside>
    </div>
  </main>

  <footer>¬© 2025 CISO Open Mic</footer>

  <!-- Script for contextual toggle -->
  <script>
    const toggleBtn = document.getElementById('theme-toggle');
    toggleBtn.addEventListener('click', () => {
      document.body.classList.toggle('light');
      if (document.body.classList.contains('light')) {
        toggleBtn.textContent = 'Dark';   // in Light mode, option is Dark
      } else {
        toggleBtn.textContent = 'Light';  // in Dark mode, option is Light
      }
    });
  </script>
</body>
</html>
